{
    "sourceFile": "components/navigation.tsx",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 0,
            "patches": [
                {
                    "date": 1741894015502,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                }
            ],
            "date": 1741894015502,
            "name": "Commit-0",
            "content": "\"use client\";\n\nimport { useState, useEffect } from 'react';\nimport { usePathname, useRouter } from 'next/navigation';\nimport Link from 'next/link';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { Button } from '@/components/ui/button';\nimport {\n  NavigationMenu,\n  NavigationMenuContent,\n  NavigationMenuItem,\n  NavigationMenuLink,\n  NavigationMenuList,\n  NavigationMenuTrigger,\n} from '@/components/ui/navigation-menu';\nimport { Menu, X, BarChart2, Users, Mail, FileText, Zap, Loader2 } from 'lucide-react';\nimport { useAuth } from '@/contexts/AuthContext';\nimport { toast } from 'sonner';\n\nconst features = [\n  {\n    title: 'Smart Pipeline',\n    description: 'Visualize and optimize your sales process',\n    icon: BarChart2,\n  },\n  {\n    title: 'Lead Management',\n    description: 'Capture and nurture leads effectively',\n    icon: Users,\n  },\n  {\n    title: 'Email Tools',\n    description: 'Powerful email automation and tracking',\n    icon: Mail,\n  },\n  {\n    title: 'Smart Quotes',\n    description: 'Generate and track quotes instantly',\n    icon: FileText,\n  },\n  {\n    title: 'Team Collaboration',\n    description: 'Work together seamlessly',\n    icon: Zap,\n  },\n];\n\nexport function Navigation() {\n  const { signInWithGoogle } = useAuth();\n  const router = useRouter();\n  const [isScrolled, setIsScrolled] = useState(false);\n  const [isMobileMenuOpen, setIsMobileMenuOpen] = useState(false);\n  const [isGoogleLoading, setIsGoogleLoading] = useState(false);\n  const pathname = usePathname();\n  const isDashboard = pathname?.startsWith('/dashboard');\n\n  const handleGoogleSignIn = async () => {\n    setIsGoogleLoading(true);\n    \n    try {\n      await signInWithGoogle();\n      toast.success('Account created successfully with Google!');\n      router.push('/dashboard');\n    } catch (error: any) {\n      toast.error(error.message || 'Failed to sign up with Google');\n      // If there's an error, redirect to the register page as fallback\n      router.push('/auth/register');\n    } finally {\n      setIsGoogleLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    const handleScroll = () => {\n      setIsScrolled(window.scrollY > 10);\n    };\n\n    window.addEventListener('scroll', handleScroll);\n    return () => window.removeEventListener('scroll', handleScroll);\n  }, []);\n\n  // Don't render navigation if we're in the dashboard\n  if (isDashboard) {\n    return null;\n  }\n\n  return (\n    <header\n      className={`fixed top-0 w-full z-50 transition-all duration-300 ${\n        isScrolled ? 'bg-white/80 backdrop-blur-md shadow-sm' : 'bg-transparent'\n      }`}\n    >\n      <div className=\"container mx-auto px-4\">\n        <div className=\"flex items-center justify-between h-16\">\n          <Link href=\"/\" className=\"flex items-center space-x-2\">\n            <Zap className=\"w-8 h-8 text-primary\" />\n            <span className=\"font-bold text-xl\">SalesPro</span>\n          </Link>\n\n          {/* Desktop Navigation */}\n          <div className=\"hidden md:flex items-center space-x-8\">\n            <NavigationMenu>\n              <NavigationMenuList>\n                <NavigationMenuItem>\n                  <NavigationMenuTrigger>Features</NavigationMenuTrigger>\n                  <NavigationMenuContent>\n                    <div className=\"grid w-[600px] gap-3 p-4 md:grid-cols-2\">\n                      {features.map((feature) => (\n                        <NavigationMenuLink\n                          key={feature.title}\n                          href=\"#\"\n                          className=\"block select-none space-y-1 rounded-md p-3 leading-none no-underline outline-none transition-colors hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground\"\n                        >\n                          <div className=\"flex items-center space-x-2\">\n                            <feature.icon className=\"h-5 w-5\" />\n                            <div className=\"text-sm font-medium leading-none\">{feature.title}</div>\n                          </div>\n                          <p className=\"line-clamp-2 text-sm leading-snug text-muted-foreground\">\n                            {feature.description}\n                          </p>\n                        </NavigationMenuLink>\n                      ))}\n                    </div>\n                  </NavigationMenuContent>\n                </NavigationMenuItem>\n                <NavigationMenuItem>\n                  <Link href=\"/pricing\" legacyBehavior passHref>\n                    <NavigationMenuLink className=\"group inline-flex h-10 w-max items-center justify-center rounded-md px-4 py-2 text-sm font-medium transition-colors hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground focus:outline-none disabled:pointer-events-none disabled:opacity-50\">\n                      Pricing\n                    </NavigationMenuLink>\n                  </Link>\n                </NavigationMenuItem>\n                <NavigationMenuItem>\n                  <Link href=\"/resources\" legacyBehavior passHref>\n                    <NavigationMenuLink className=\"group inline-flex h-10 w-max items-center justify-center rounded-md px-4 py-2 text-sm font-medium transition-colors hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground focus:outline-none disabled:pointer-events-none disabled:opacity-50\">\n                      Resources\n                    </NavigationMenuLink>\n                  </Link>\n                </NavigationMenuItem>\n              </NavigationMenuList>\n            </NavigationMenu>\n\n            <div className=\"flex items-center space-x-4\">\n              <Button variant=\"ghost\" asChild>\n                <Link href=\"/auth/login\">Login</Link>\n              </Button>\n              <Button \n                onClick={handleGoogleSignIn}\n                disabled={isGoogleLoading}\n              >\n                {isGoogleLoading ? (\n                  <>\n                    <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\n                    Signing up...\n                  </>\n                ) : (\n                  'Start Free Trial'\n                )}\n              </Button>\n            </div>\n          </div>\n\n          {/* Mobile Menu Button */}\n          <button\n            className=\"md:hidden\"\n            onClick={() => setIsMobileMenuOpen(!isMobileMenuOpen)}\n          >\n            {isMobileMenuOpen ? (\n              <X className=\"h-6 w-6\" />\n            ) : (\n              <Menu className=\"h-6 w-6\" />\n            )}\n          </button>\n        </div>\n      </div>\n\n      {/* Mobile Menu */}\n      <AnimatePresence>\n        {isMobileMenuOpen && (\n          <motion.div\n            initial={{ opacity: 0, height: 0 }}\n            animate={{ opacity: 1, height: 'auto' }}\n            exit={{ opacity: 0, height: 0 }}\n            className=\"md:hidden bg-white border-t\"\n          >\n            <div className=\"container mx-auto px-4 py-4 space-y-4\">\n              <Link\n                href=\"#features\"\n                className=\"block px-4 py-2 text-sm hover:bg-accent rounded-md\"\n                onClick={() => setIsMobileMenuOpen(false)}\n              >\n                Features\n              </Link>\n              <Link\n                href=\"/pricing\"\n                className=\"block px-4 py-2 text-sm hover:bg-accent rounded-md\"\n                onClick={() => setIsMobileMenuOpen(false)}\n              >\n                Pricing\n              </Link>\n              <Link\n                href=\"/resources\"\n                className=\"block px-4 py-2 text-sm hover:bg-accent rounded-md\"\n                onClick={() => setIsMobileMenuOpen(false)}\n              >\n                Resources\n              </Link>\n              <div className=\"space-y-2 px-4\">\n                <Button variant=\"ghost\" className=\"w-full justify-start\" asChild>\n                  <Link href=\"/auth/login\">Login</Link>\n                </Button>\n                <Button \n                  className=\"w-full justify-start\"\n                  onClick={handleGoogleSignIn}\n                  disabled={isGoogleLoading}\n                >\n                  {isGoogleLoading ? (\n                    <>\n                      <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\n                      Signing up...\n                    </>\n                  ) : (\n                    'Start Free Trial'\n                  )}\n                </Button>\n              </div>\n            </div>\n          </motion.div>\n        )}\n      </AnimatePresence>\n    </header>\n  );\n}"
        }
    ]
}