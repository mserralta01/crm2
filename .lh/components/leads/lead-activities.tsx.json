{
    "sourceFile": "components/leads/lead-activities.tsx",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 2,
            "patches": [
                {
                    "date": 1741890967632,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1743707424254,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -10,8 +10,9 @@\n import { getLeadById } from '@/lib/services/leads-service';\n import { Lead } from '@/data/leads';\n import { format } from 'date-fns';\n import { Badge } from '@/components/ui/badge';\n+import { NoteSection } from '@/components/notes/note-section';\n \n interface LeadActivitiesProps {\n   leadId: string;\n }\n@@ -100,28 +101,10 @@\n         <Card className=\"p-6\">\n           <div className=\"flex justify-between items-center mb-6\">\n             <h3 className=\"text-lg font-semibold\">Notes</h3>\n           </div>\n-          <div className=\"space-y-4\">\n-            <Textarea placeholder=\"Add a note...\" className=\"min-h-[100px]\" />\n-            <Button className=\"w-full\">Save Note</Button>\n-            \n-            <div className=\"space-y-4 mt-6\">\n-              {lead.activities.notes.length === 0 ? (\n-                <div className=\"text-center p-4 text-muted-foreground\">No notes found</div>\n-              ) : (\n-                lead.activities.notes.map(note => (\n-                  <Card key={note.id} className=\"p-4 bg-muted/50\">\n-                    <h4 className=\"font-medium\">{note.title}</h4>\n-                    <p className=\"text-sm text-muted-foreground mt-1\">{note.description}</p>\n-                    <div className=\"text-sm text-muted-foreground mt-2\">\n-                      {formatDate(note.date)}\n-                    </div>\n-                  </Card>\n-                ))\n-              )}\n-            </div>\n-          </div>\n+          \n+          <NoteSection leadId={leadId} notes={lead.activities.notes} />\n         </Card>\n       </TabsContent>\n \n       <TabsContent value=\"email\" className=\"space-y-4\">\n"
                },
                {
                    "date": 1743707478089,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -10,9 +10,9 @@\n import { getLeadById } from '@/lib/services/leads-service';\n import { Lead } from '@/data/leads';\n import { format } from 'date-fns';\n import { Badge } from '@/components/ui/badge';\n-import { NoteSection } from '@/components/notes/note-section';\n+import { NoteSection } from '@/components/leads/note-section';\n \n interface LeadActivitiesProps {\n   leadId: string;\n }\n"
                }
            ],
            "date": 1741890967632,
            "name": "Commit-0",
            "content": "\"use client\";\n\nimport { useState, useEffect } from 'react';\nimport { TabsContent } from '@/components/ui/tabs';\nimport { Card } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Textarea } from '@/components/ui/textarea';\nimport { Plus, Send, Phone, Clock, FileText, Calendar } from 'lucide-react';\nimport { getLeadById } from '@/lib/services/leads-service';\nimport { Lead } from '@/data/leads';\nimport { format } from 'date-fns';\nimport { Badge } from '@/components/ui/badge';\n\ninterface LeadActivitiesProps {\n  leadId: string;\n}\n\nexport function LeadActivities({ leadId }: LeadActivitiesProps) {\n  const [lead, setLead] = useState<Lead | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n\n  useEffect(() => {\n    async function fetchLead() {\n      try {\n        setLoading(true);\n        const leadData = await getLeadById(leadId);\n        setLead(leadData);\n      } catch (err) {\n        console.error('Error fetching lead activities:', err);\n        setError('Failed to load lead activities');\n      } finally {\n        setLoading(false);\n      }\n    }\n\n    fetchLead();\n  }, [leadId]);\n\n  if (loading) {\n    return <div className=\"p-4 text-center\">Loading activities...</div>;\n  }\n\n  if (error || !lead) {\n    return <div className=\"p-4 text-center text-red-500\">{error || 'Activities not found'}</div>;\n  }\n\n  const formatDate = (dateString: string) => {\n    return format(new Date(dateString), 'MMM d, yyyy h:mm a');\n  };\n\n  return (\n    <div className=\"mt-6\">\n      <TabsContent value=\"phone\" className=\"space-y-4\">\n        <Card className=\"p-6\">\n          <div className=\"flex justify-between items-center mb-6\">\n            <h3 className=\"text-lg font-semibold\">Call History</h3>\n            <Button>\n              <Plus className=\"w-4 h-4 mr-2\" />\n              Log New Call\n            </Button>\n          </div>\n          \n          <div className=\"space-y-4\">\n            {lead.activities.calls.length === 0 ? (\n              <div className=\"text-center p-4 text-muted-foreground\">No call history found</div>\n            ) : (\n              lead.activities.calls.map(call => (\n                <Card key={call.id} className=\"p-4 bg-muted/50\">\n                  <div className=\"flex items-start justify-between\">\n                    <div className=\"flex items-start space-x-3\">\n                      <div className=\"mt-1\">\n                        <Phone className=\"w-4 h-4 text-muted-foreground\" />\n                      </div>\n                      <div>\n                        <h4 className=\"font-medium\">{call.title}</h4>\n                        <p className=\"text-sm text-muted-foreground mt-1\">{call.description}</p>\n                        <div className=\"flex items-center space-x-3 mt-2 text-sm\">\n                          <span className=\"flex items-center\">\n                            <Clock className=\"w-3 h-3 mr-1\" />\n                            {call.duration}\n                          </span>\n                          <span className=\"text-muted-foreground\">\n                            {formatDate(call.date)}\n                          </span>\n                        </div>\n                      </div>\n                    </div>\n                    <Badge variant=\"outline\">{call.status}</Badge>\n                  </div>\n                </Card>\n              ))\n            )}\n          </div>\n        </Card>\n      </TabsContent>\n\n      <TabsContent value=\"notes\" className=\"space-y-4\">\n        <Card className=\"p-6\">\n          <div className=\"flex justify-between items-center mb-6\">\n            <h3 className=\"text-lg font-semibold\">Notes</h3>\n          </div>\n          <div className=\"space-y-4\">\n            <Textarea placeholder=\"Add a note...\" className=\"min-h-[100px]\" />\n            <Button className=\"w-full\">Save Note</Button>\n            \n            <div className=\"space-y-4 mt-6\">\n              {lead.activities.notes.length === 0 ? (\n                <div className=\"text-center p-4 text-muted-foreground\">No notes found</div>\n              ) : (\n                lead.activities.notes.map(note => (\n                  <Card key={note.id} className=\"p-4 bg-muted/50\">\n                    <h4 className=\"font-medium\">{note.title}</h4>\n                    <p className=\"text-sm text-muted-foreground mt-1\">{note.description}</p>\n                    <div className=\"text-sm text-muted-foreground mt-2\">\n                      {formatDate(note.date)}\n                    </div>\n                  </Card>\n                ))\n              )}\n            </div>\n          </div>\n        </Card>\n      </TabsContent>\n\n      <TabsContent value=\"email\" className=\"space-y-4\">\n        <Card className=\"p-6\">\n          <div className=\"flex justify-between items-center mb-6\">\n            <h3 className=\"text-lg font-semibold\">Email Communication</h3>\n          </div>\n          <div className=\"space-y-4\">\n            <Input type=\"text\" placeholder=\"Subject\" />\n            <Textarea placeholder=\"Write your email...\" className=\"min-h-[200px]\" />\n            <Button className=\"w-full\">\n              <Send className=\"w-4 h-4 mr-2\" />\n              Send Email\n            </Button>\n\n            <div className=\"space-y-4 mt-6\">\n              {lead.activities.emails.length === 0 ? (\n                <div className=\"text-center p-4 text-muted-foreground\">No email history found</div>\n              ) : (\n                lead.activities.emails.map(email => (\n                  <Card key={email.id} className=\"p-4 bg-muted/50\">\n                    <h4 className=\"font-medium\">{email.title}</h4>\n                    <p className=\"text-sm text-muted-foreground mt-1\">{email.description}</p>\n                    <div className=\"flex items-center space-x-3 mt-2 text-sm\">\n                      <span className=\"text-muted-foreground\">\n                        {formatDate(email.date)}\n                      </span>\n                      {email.attachments && (\n                        <span className=\"flex items-center text-primary\">\n                          <FileText className=\"w-3 h-3 mr-1\" />\n                          {email.attachments.length} attachment(s)\n                        </span>\n                      )}\n                    </div>\n                  </Card>\n                ))\n              )}\n            </div>\n          </div>\n        </Card>\n      </TabsContent>\n\n      <TabsContent value=\"meetings\" className=\"space-y-4\">\n        <Card className=\"p-6\">\n          <div className=\"flex justify-between items-center mb-6\">\n            <h3 className=\"text-lg font-semibold\">Meetings</h3>\n            <Button>\n              <Plus className=\"w-4 h-4 mr-2\" />\n              Schedule Meeting\n            </Button>\n          </div>\n\n          <div className=\"space-y-4\">\n            {lead.activities.meetings.length === 0 ? (\n              <div className=\"text-center p-4 text-muted-foreground\">No meetings found</div>\n            ) : (\n              lead.activities.meetings.map(meeting => (\n                <Card key={meeting.id} className=\"p-4 bg-muted/50\">\n                  <div className=\"flex items-start space-x-3\">\n                    <div className=\"mt-1\">\n                      <Calendar className=\"w-4 h-4 text-muted-foreground\" />\n                    </div>\n                    <div>\n                      <h4 className=\"font-medium\">{meeting.title}</h4>\n                      <p className=\"text-sm text-muted-foreground mt-1\">{meeting.description}</p>\n                      <div className=\"flex items-center space-x-3 mt-2 text-sm\">\n                        <span className=\"flex items-center\">\n                          <Clock className=\"w-3 h-3 mr-1\" />\n                          {meeting.duration}\n                        </span>\n                        <span className=\"text-muted-foreground\">\n                          {formatDate(meeting.date)}\n                        </span>\n                      </div>\n                    </div>\n                  </div>\n                </Card>\n              ))\n            )}\n          </div>\n        </Card>\n      </TabsContent>\n\n      <TabsContent value=\"documents\" className=\"space-y-4\">\n        <Card className=\"p-6\">\n          <div className=\"flex justify-between items-center mb-6\">\n            <h3 className=\"text-lg font-semibold\">Documents</h3>\n            <Button>\n              <Plus className=\"w-4 h-4 mr-2\" />\n              Upload Document\n            </Button>\n          </div>\n\n          <div className=\"space-y-4\">\n            {lead.activities.documents.length === 0 ? (\n              <div className=\"text-center p-4 text-muted-foreground\">No documents found</div>\n            ) : (\n              lead.activities.documents.map(doc => (\n                <Card key={doc.id} className=\"p-4 bg-muted/50\">\n                  <div className=\"flex items-start space-x-3\">\n                    <div className=\"mt-1\">\n                      <FileText className=\"w-4 h-4 text-muted-foreground\" />\n                    </div>\n                    <div>\n                      <h4 className=\"font-medium\">{doc.title}</h4>\n                      <p className=\"text-sm text-muted-foreground mt-1\">{doc.description}</p>\n                      <div className=\"text-sm text-muted-foreground mt-2\">\n                        {formatDate(doc.date)}\n                      </div>\n                    </div>\n                  </div>\n                </Card>\n              ))\n            )}\n          </div>\n        </Card>\n      </TabsContent>\n    </div>\n  );\n}"
        }
    ]
}