{
    "sourceFile": "app/dashboard/layout.tsx",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 1,
            "patches": [
                {
                    "date": 1741893129754,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1741893168308,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -11,9 +11,10 @@\n   Settings,\n   Menu,\n   X,\n   LogOut,\n-  Zap\n+  Zap,\n+  Shield\n } from 'lucide-react';\n import { Navigation } from '@/components/navigation';\n import { Footer } from '@/components/footer';\n import ProtectedRoute from '@/components/ProtectedRoute';\n@@ -31,9 +32,9 @@\n }: {\n   children: React.ReactNode;\n }) {\n   const [isSidebarOpen, setIsSidebarOpen] = useState(true);\n-  const { logout } = useAuth();\n+  const { logout, isAdmin } = useAuth();\n \n   const handleSignOut = async () => {\n     try {\n       await logout();\n@@ -70,8 +71,21 @@\n                     {item.label}\n                   </Button>\n                 </Link>\n               ))}\n+              \n+              {/* Admin-only menu item */}\n+              {isAdmin && (\n+                <Link href=\"/dashboard/admin\">\n+                  <Button\n+                    variant=\"ghost\"\n+                    className=\"w-full justify-start text-primary\"\n+                  >\n+                    <Shield className=\"mr-2 h-5 w-5\" />\n+                    Admin Panel\n+                  </Button>\n+                </Link>\n+              )}\n             </nav>\n           </div>\n \n           <div className=\"absolute bottom-4 left-4 right-4\">\n"
                }
            ],
            "date": 1741893129754,
            "name": "Commit-0",
            "content": "\"use client\";\n\nimport { useState } from 'react';\nimport Link from 'next/link';\nimport { motion } from 'framer-motion';\nimport { Button } from '@/components/ui/button';\nimport {\n  BarChart2,\n  Users,\n  MessageSquare,\n  Settings,\n  Menu,\n  X,\n  LogOut,\n  Zap\n} from 'lucide-react';\nimport { Navigation } from '@/components/navigation';\nimport { Footer } from '@/components/footer';\nimport ProtectedRoute from '@/components/ProtectedRoute';\nimport { useAuth } from '@/contexts/AuthContext';\n\nconst menuItems = [\n  { icon: BarChart2, label: 'Dashboard', href: '/dashboard' },\n  { icon: Users, label: 'Leads', href: '/dashboard/leads' },\n  { icon: MessageSquare, label: 'Messages', href: '/dashboard/messages' },\n  { icon: Settings, label: 'Settings', href: '/dashboard/settings' },\n];\n\nexport default function DashboardLayout({\n  children,\n}: {\n  children: React.ReactNode;\n}) {\n  const [isSidebarOpen, setIsSidebarOpen] = useState(true);\n  const { logout } = useAuth();\n\n  const handleSignOut = async () => {\n    try {\n      await logout();\n      // Redirect is handled by the auth state change in AuthContext\n    } catch (error) {\n      console.error('Error signing out:', error);\n    }\n  };\n\n  return (\n    <ProtectedRoute>\n      <div className=\"min-h-screen bg-background\">\n        <Navigation />\n        {/* Sidebar */}\n        <motion.aside\n          initial={{ x: -300 }}\n          animate={{ x: isSidebarOpen ? 0 : -300 }}\n          className={`fixed top-0 left-0 z-40 h-screen w-64 bg-card border-r transition-transform`}\n        >\n          <div className=\"p-4\">\n            <Link href=\"/dashboard\" className=\"flex items-center space-x-2 mb-8\">\n              <Zap className=\"w-8 h-8 text-primary\" />\n              <span className=\"text-2xl font-bold\">SalesPro</span>\n            </Link>\n\n            <nav className=\"space-y-2\">\n              {menuItems.map((item) => (\n                <Link key={item.label} href={item.href}>\n                  <Button\n                    variant=\"ghost\"\n                    className=\"w-full justify-start\"\n                  >\n                    <item.icon className=\"mr-2 h-5 w-5\" />\n                    {item.label}\n                  </Button>\n                </Link>\n              ))}\n            </nav>\n          </div>\n\n          <div className=\"absolute bottom-4 left-4 right-4\">\n            <Button \n              variant=\"outline\" \n              className=\"w-full justify-start\"\n              onClick={handleSignOut}\n            >\n              <LogOut className=\"mr-2 h-5 w-5\" />\n              Sign Out\n            </Button>\n          </div>\n        </motion.aside>\n\n        {/* Mobile sidebar toggle */}\n        <button\n          onClick={() => setIsSidebarOpen(!isSidebarOpen)}\n          className=\"fixed bottom-4 right-4 z-50 lg:hidden bg-primary text-primary-foreground p-3 rounded-full shadow-lg\"\n        >\n          {isSidebarOpen ? (\n            <X className=\"h-6 w-6\" />\n          ) : (\n            <Menu className=\"h-6 w-6\" />\n          )}\n        </button>\n\n        {/* Main content */}\n        <div className={`${isSidebarOpen ? 'lg:ml-64' : ''} transition-all`}>\n          {children}\n        </div>\n        <Footer />\n      </div>\n    </ProtectedRoute>\n  );\n}"
        }
    ]
}